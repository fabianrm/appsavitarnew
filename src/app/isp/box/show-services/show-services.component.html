<h1 mat-dialog-title>Servicios Conectados en: {{ data.name }}</h1>
<div mat-dialog-content>
  <div *ngIf="isLoading" class="spinner-container">
    <mat-spinner></mat-spinner>
  </div>
  <table
    *ngIf="!isLoading && services.length > 0"
    mat-table
    [dataSource]="services"
    class="mat-elevation-z8"
  >
    <!-- Service Code Column -->
    <ng-container matColumnDef="code">
      <th mat-header-cell *matHeaderCellDef>CÃ³digo</th>
      <td mat-cell *matCellDef="let element">
        <!-- Agregar un link al detalle -->
        <a
          [routerLink]="[
            '/dashboard/contract/contract-detail/',
            element.service_id
          ]"
          matTooltip="Ver detalle del servicio"
          (click)="close()"
        >
          {{ element.service_code }}
        </a>
      </td>
    </ng-container>

    <!-- Port Column -->
    <ng-container matColumnDef="port">
      <th mat-header-cell *matHeaderCellDef>Puerto</th>
      <td mat-cell *matCellDef="let element">{{ element.port_number }}</td>
    </ng-container>

    <!-- Client Column -->
    <ng-container matColumnDef="client">
      <th mat-header-cell *matHeaderCellDef>Cliente</th>
      <td mat-cell *matCellDef="let element">{{ element.customer_name }}</td>
    </ng-container>

    <!-- Plan Column -->
    <ng-container matColumnDef="plan">
      <th mat-header-cell *matHeaderCellDef>Plan</th>
      <td mat-cell *matCellDef="let element">{{ element.plan_name }}</td>
    </ng-container>

    <!-- Status Column -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>Estado</th>
      <td mat-cell *matCellDef="let element">
        <span
          [ngClass]="{
            'status-active': element.status == 'activo',
            'status-inactive': element.status == 'suspendido',
            'status-terminated': element.status == 'terminado'
          }"
        >
          {{ element.status | titlecase }}
        </span>
      </td>
    </ng-container>

    <tr
      mat-header-row
      *matHeaderRowDef="['code', 'port', 'client', 'plan', 'status']"
    ></tr>
    <tr
      mat-row
      *matRowDef="
        let row;
        columns: ['code', 'port', 'client', 'plan', 'status']
      "
    ></tr>
  </table>

  <div *ngIf="!isLoading && services.length === 0" class="no-services-message">
    No hay servicios asociados a esta caja.
  </div>
</div>
<div mat-dialog-actions>
  <button mat-button (click)="close()">Cerrar</button>
</div>
